!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.webglRenderEngine=e():t.webglRenderEngine=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=15)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var n=i(8),r=i(9);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e,i){var n=i(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){var n=i(11);function r(e,i,a){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,i){var r=n(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(i):a.value}},r(e,i,a||e)}t.exports=r},function(t,e,i){var n=i(12),r=i(13),a=i(14);t.exports=function(t){return n(t)||r(t)||a()}},function(t,e){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(t){return typeof t}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(e)}t.exports=i},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},function(t,e,i){var n=i(2);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"GL_DRAW_MODE_POINTS",(function(){return l})),i.d(n,"GL_DRAW_MODE_LINES",(function(){return c})),i.d(n,"GL_DRAW_MODE_LINE_STRIP",(function(){return f})),i.d(n,"GL_DRAW_MODE_LINE_LOOP",(function(){return v})),i.d(n,"GL_DRAW_MODE_TRIANGLES",(function(){return d})),i.d(n,"GL_DRAW_MODE_TRIANGLE_STRIP",(function(){return y})),i.d(n,"GL_DRAW_MODE_TRIANGLE_FAN",(function(){return m})),i.d(n,"OBJECT_TYPE_MESH",(function(){return p})),i.d(n,"OBJECT_TYPE_PERSPECTIVE_CAMERA",(function(){return g})),i.d(n,"OBJECT_TYPE_ORTHOGRAPHIC_CAMERA",(function(){return _})),i.d(n,"OBJECT_TYPE_LINE",(function(){return x})),i.d(n,"OBJECT_TYPE_LINE_SEGMENTS",(function(){return M})),i.d(n,"OBJECT_TYPE_LINE_LOOP",(function(){return k})),i.d(n,"OBJECT_TYPE_PLANE",(function(){return w})),i.d(n,"OBJECT_TYPE_POINTS",(function(){return b})),i.d(n,"OBJECT_TYPE_GROUP",(function(){return A})),i.d(n,"OBJECT_TYPE_SCENE",(function(){return E})),i.d(n,"MATERIAL_TYPE_BASIC",(function(){return z})),i.d(n,"MATERIAL_TYPE_LINE_BASIC",(function(){return S})),i.d(n,"LINEAR_INTERPOLATION",(function(){return P})),i.d(n,"STEP_INTERPOLATION",(function(){return C})),i.d(n,"CUBIC_SPLINE_INTERPOLATION",(function(){return T}));var r={};i.r(r),i.d(r,"clamp",(function(){return ct})),i.d(r,"degToRad",(function(){return ft})),i.d(r,"radToDeg",(function(){return vt})),i.d(r,"arrayMax",(function(){return dt}));var a=i(0),s=i.n(a),o=i(1),u=i.n(o),h=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];s()(this,t),this._autoStart=e,this._startTime=0,this._prevTime=0,this._elapsedTime=0}return u()(t,[{key:"now",value:function(){return(performance||Date).now()}},{key:"start",value:function(){this._startTime=this.now(),this._prevTime=this._startTime,this._elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getDeltaTime(),this.running=!1}},{key:"getDeltaTime",value:function(){var t=0;if(!this.running&&this._autoStart)return this.start(),t;if(this.running){var e=this.now();t=(e-this._prevTime)/1e3,this._prevTime=e,this._elapsedTime+=t}return t}},{key:"getElapsedTime",value:function(){return this.getDeltaTime(),this._elapsedTime}}]),t}(),l=0,c=1,f=2,v=3,d=4,y=5,m=6,p=0,g=1,_=2,x=3,M=4,k=5,w=6,b=7,A=8,E=9,z="BasicMaterial",S="LineBasicMaterial",P=2020,C=2021,T=2022,I=0,F=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0;s()(this,t),this.name=e,this.duration=i,this.tracks=n,this.uuid=++I,this.duration<0&&this.setDurationFromTracks()}return u()(t,[{key:"setDurationFromTracks",value:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i<n;i++){var r=t[i];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}}]),t}(),L=function(){function t(e){s()(this,t),this._time=0,this._clips=e,this.timeScale=1}return u()(t,[{key:"update",value:function(t){t*=this.timeScale,this._time+=t;for(var e=this._time,i=this._clips,n=0,r=i.length;n<r;n++)for(var a=i[n],s=a.tracks,o=0,u=s.length;o<u;o++){var h=s[o],l=h.node,c=h.property,f=h.interpolant;e%=a.duration;var v=f.evaluate(e);l[c].setFromArray(v)}}},{key:"destroy",value:function(){}}]),t}(),O=i(3),R=i.n(O),N=i(2),j=i.n(N),B=i(4),U=i.n(B),D=function(){function t(e,i,n){s()(this,t),this.xArray=e,this.yArray=i,this.ySize=n}return u()(t,[{key:"evaluate",value:function(t){for(var e,i,n,r=this.xArray,a=0,s=r.length;a<s;a++){if(t===r[a]){0===a?(e=a+1,i=r[a],n=r[e]):(e=a,i=r[a-1],n=r[e]);break}if(t>r[a]&&t<r[a+1]){e=a+1,i=r[a],n=r[e];break}}return this._interpolate(e,i,t,n)}}]),t}(),G=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"_interpolate",value:function(t,e,i,n){for(var r=this.yArray,a=this.ySize,s=new r.constructor(a),o=t*a,u=o-a,h=(i-e)/(n-e),l=1-h,c=0,f=s.length;c<f;c++)s[c]=r[u+c]*l+r[o+c]*h;return s}}]),e}(D),V=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"_interpolate",value:function(t){for(var e=this.yArray,i=this.ySize,n=new e.constructor(i),r=t*i,a=0,s=n.length;a<s;a++)n[a]=e[r+a];return n}}]),e}(D),W=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"_interpolate",value:function(t,e,i,n){var r=this.xArray,a=this.yArray,s=this.ySize,o=new a.constructor(s),u=t-2,h=t+1,l=r[u],c=r[h];void 0===l&&(u=t,l=n),void 0===c&&(h=t-1,c=e);for(var f=(i-e)/(n-e),v=f*f,d=v*f,y=(e-n)/(e-l)*.5,m=(e-n)/(c-n)*.5,p=-(d-2*v+f)*y,g=(1+y)*d+(-1.5-2*y)*v+(-.5+y)*f+1,_=(-1-m)*d+(1.5+m)*v+.5*f,x=m*d-m*v,M=u*s,k=t*s,w=k-s,b=h*s,A=0;A<s;A++)o[A]=p*a[M+A]+g*a[w+A]+_*a[k+A]+x*a[b+A];return o}}]),e}(D),Y=function(){function t(e,i,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:P;s()(this,t),this.node=e,this.property=i,this.name=e.name+"."+i,this.times=n,this.values=r,this.setInterpolant(a)}return u()(t,[{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"createLinearInterpolant",value:function(){return new G(this.times,this.values,this.getValueSize())}},{key:"createStepInterpolant",value:function(){return new V(this.times,this.values,this.getValueSize())}},{key:"createCubicSplineInterpolant",value:function(){return new W(this.times,this.values,this.getValueSize())}},{key:"setInterpolant",value:function(t){var e;void 0===this.createInterpolant&&(t===P?e=this.createLinearInterpolant:t===C?e=this.createStepInterpolant:t===T&&(e=this.createCubicSplineInterpolant),this.createInterpolant=e);this.interpolant=this.createInterpolant()}}]),t}(),q=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),e}(Y),X=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;s()(this,t),this._x=e,this._y=i,this._z=n,this._w=r}return u()(t,[{key:"set",value:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this}},{key:"setFromArray",value:function(t){this._x=t[0],this._y=t[1],this._z=t[2],this._w=t[3]}},{key:"setFromEuler",value:function(t){var e=t.x,i=t.y,n=t.z,r=t.order,a=Math.cos(e/2),s=Math.cos(i/2),o=Math.cos(n/2),u=Math.sin(e/2),h=Math.sin(i/2),l=Math.sin(n/2);return"XYZ"===r?(this._x=u*s*o+a*h*l,this._y=a*h*o-u*s*l,this._z=a*s*l+u*h*o,this._w=a*s*o-u*h*l):"YXZ"===r?(this._x=u*s*o+a*h*l,this._y=a*h*o-u*s*l,this._z=a*s*l-u*h*o,this._w=a*s*o+u*h*l):"ZXY"===r?(this._x=u*s*o-a*h*l,this._y=a*h*o+u*s*l,this._z=a*s*l+u*h*o,this._w=a*s*o-u*h*l):"ZYX"===r?(this._x=u*s*o-a*h*l,this._y=a*h*o+u*s*l,this._z=a*s*l-u*h*o,this._w=a*s*o+u*h*l):"YZX"===r?(this._x=u*s*o+a*h*l,this._y=a*h*o+u*s*l,this._z=a*s*l-u*h*o,this._w=a*s*o-u*h*l):"XZY"===r&&(this._x=u*s*o-a*h*l,this._y=a*h*o-u*s*l,this._z=a*s*l+u*h*o,this._w=a*s*o+u*h*l),this}},{key:"setFromAxisAngle",value:function(t,e){var i=e/2,n=Math.sin(i),r=Math.cos(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=r,this}},{key:"setFromRotationMatrix",value:function(t){var e,i=t.elements,n=i[0],r=i[4],a=i[8],s=i[1],o=i[5],u=i[9],h=i[2],l=i[6],c=i[10],f=n+o+c;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(l-u)*e,this._y=(a-h)*e,this._z=(s-r)*e):n>o&&n>c?(e=2*Math.sqrt(1+n-o-c),this._w=(l-u)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(a+h)/e):o>c?(e=2*Math.sqrt(1+o-n-c),this._w=(a-h)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+c-n-o),this._w=(s-r)/e,this._x=(a+h)/e,this._y=(u+l)/e,this._z=.25*e),this}},{key:"setFromQuaternionsProduct",value:function(t,e){var i=t.x,n=t.y,r=t.z,a=t.w,s=e.x,o=e.y,u=e.z,h=e.w;return this._x=i*h+a*s+n*u-r*o,this._y=n*h+a*o+r*s-i*u,this._z=r*h+a*u+i*o-n*s,this._w=a*h-i*s-n*o-r*u,this}},{key:"conjugate",value:function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this}},{key:"multiply",value:function(t){return this.setFromQuaternionsProduct(this,t)}},{key:"premultiply",value:function(t){return this.setFromQuaternionsProduct(t,this)}},{key:"inverse",value:function(){return this.conjugate()}},{key:"dot",value:function(t){return this._x*t.x+this._y*t.y+this._z*t.z+this._w*t.w}},{key:"lengthSquared",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x/=t,this._y/=t,this._z/=t,this._w/=t),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,s=a*t.w+i*t.x+n*t.y+r*t.z;if(s>=1)return this;s<0?(this._x=-t.x,this._y=-t.y,this._z=-t.z,this._w=-t.w,s=-s):this.copy(t);var o=Math.sqrt(1-s*s);if(o<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*i+e*this._x,this._y=u*n+e*this._y,this._z=u*r+e*this._z,this.normalize()}var h=Math.atan2(o,s),l=Math.sin((1-e)*h)/o,c=Math.sin(e*h)/o;return this._w=l*a+c*this._w,this._x=l*i+c*this._x,this._y=l*n+c*this._y,this._z=l*r+c*this._z,this}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._z=t}},{key:"w",get:function(){return this._w},set:function(t){this._w=t}}],[{key:"slerp",value:function(t,e,i,n){return i.copy(t).slerp(e,n)}},{key:"slerpFlat",value:function(t,e,i,n,r,a,s){var o=i[n+0],u=i[n+1],h=i[n+2],l=i[n+3],c=r[a+0],f=r[a+1],v=r[a+2],d=r[a+3];if(l!==d||o!==c||u!==f||h!==v){var y=1-s,m=o*c+u*f+h*v+l*d,p=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var _=Math.sqrt(g),x=Math.atan2(_,m*p);y=Math.sin(y*x)/_,s=Math.sin(s*x)/_}var M=s*p;if(o=o*y+c*M,u=u*y+f*M,h=h*y+v*M,l=l*y+d*M,y===1-s){var k=1/Math.sqrt(o*o+u*u+h*h+l*l);o*=k,u*=k,h*=k,l*=k}}t[e+0]=o,t[e+1]=u,t[e+2]=h,t[e+3]=l}}]),t}(),H=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"_interpolate",value:function(t,e,i,n){var r=this.yArray,a=this.ySize,s=t*a,o=(i-e)/(n-e),u=new r.constructor(a);return X.slerpFlat(u,0,r,s-a,r,s,o),u}}]),e}(D),Z=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"createLinearInterpolant",value:function(){return new H(this.times,this.values,this.getValueSize())}}]),e}(Y),K=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),e}(Y),Q=i(6),J=i.n(Q),$=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s()(this,t),this.x=e,this.y=i,this.z=n}return u()(t,[{key:"set",value:function(t,e,i){return this.x=t,this.y=e,this.z=i,this}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"setFromScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setFromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"setFromVectorsSum",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"setFromVectorsDiff",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrix4Column",value:function(t,e){return this.setFromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.setFromArray(t.elements,3*e)}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("Vec3: 索引".concat(t,"超过边界"))}}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(t){return this.addScalar(-t)}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"lengthSquared",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"applyMatrix4",value:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements,a=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*a,this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"cross",value:function(t){return this.setFromVectorsCross(this,t)}},{key:"setFromVectorsCross",value:function(t,e){var i=t.x,n=t.y,r=t.z,a=e.x,s=e.y,o=e.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"setFromSphericalCoords",value:function(t,e,i){var n=Math.sin(e);return this.x=n*Math.sin(i)*t,this.y=Math.cos(e)*t,this.z=n*Math.cos(i)*t,this}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.theta,t.phi)}},{key:"setFromBufferAttribute",value:function(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"project",value:function(t){return this.applyMatrix4(t.worldMatrixInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.worldMatrix)}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}}]),t}(),tt=function(){function t(e){if(s()(this,t),e){for(var i=new Float32Array(16),n=0;n<16;n++)i[n]=e[n];this.elements=i}else this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return u()(t,[{key:"copy",value:function(t){var e=t.elements,i=this.elements;if(e!==i){for(var n=0;n<16;++n)i[n]=e[n];return this}}},{key:"set",value:function(t,e,i,n,r,a,s,o,u,h,l,c,f,v,d,y){var m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=n,m[1]=r,m[5]=a,m[9]=s,m[13]=o,m[2]=u,m[6]=h,m[10]=l,m[14]=c,m[3]=f,m[7]=v,m[11]=d,m[15]=y,this}},{key:"setFromArray",value:function(t){for(var e=this.elements,i=0;i<16;++i)e[i]=t[i];return this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,n=e.elements,r=this.elements,a=i[0],s=i[4],o=i[8],u=i[12],h=i[1],l=i[5],c=i[9],f=i[13],v=i[2],d=i[6],y=i[10],m=i[14],p=i[3],g=i[7],_=i[11],x=i[15],M=n[0],k=n[4],w=n[8],b=n[12],A=n[1],E=n[5],z=n[9],S=n[13],P=n[2],C=n[6],T=n[10],I=n[14],F=n[3],L=n[7],O=n[11],R=n[15];return r[0]=a*M+s*A+o*P+u*F,r[4]=a*k+s*E+o*C+u*L,r[8]=a*w+s*z+o*T+u*O,r[12]=a*b+s*S+o*I+u*R,r[1]=h*M+l*A+c*P+f*F,r[5]=h*k+l*E+c*C+f*L,r[9]=h*w+l*z+c*T+f*O,r[13]=h*b+l*S+c*I+f*R,r[2]=v*M+d*A+y*P+m*F,r[6]=v*k+d*E+y*C+m*L,r[10]=v*w+d*z+y*T+m*O,r[14]=v*b+d*S+y*I+m*R,r[3]=p*M+g*A+_*P+x*F,r[7]=p*k+g*E+_*C+x*L,r[11]=p*w+g*z+_*T+x*O,r[15]=p*b+g*S+_*I+x*R,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],s=t[5],o=t[9],u=t[13],h=t[2],l=t[6],c=t[10],f=t[14],v=t[3],d=t[7],y=t[11],m=t[15];return r*o*l*v-n*u*l*v-r*s*c*v+i*u*c*v+n*s*f*v-i*o*f*v-r*o*h*d+n*u*h*d+r*a*c*d-e*u*c*d-n*a*f*d+e*o*f*d+r*s*h*y-i*u*h*y-r*a*l*y+e*u*l*y+i*a*f*y-e*s*f*y-n*s*h*m+i*o*h*m+n*a*l*m-e*o*l*m-i*a*c*m+e*s*c*m}},{key:"setInverseOf",value:function(t){var e=this.elements,i=t.elements,n=i[0],r=i[4],a=i[8],s=i[12],o=i[1],u=i[5],h=i[9],l=i[13],c=i[2],f=i[6],v=i[10],d=i[14],y=i[3],m=i[7],p=i[11],g=i[15],_=t.determinant();return e[0]=(h*d*m-l*v*m+l*f*p-u*d*p-h*f*g+u*v*g)/_,e[4]=(s*v*m-a*d*m-s*f*p+r*d*p+a*f*g-r*v*g)/_,e[8]=(a*l*m-s*h*m+s*u*p-r*l*p-a*u*g+r*h*g)/_,e[12]=(s*h*f-a*l*f-s*u*v+r*l*v+a*u*d-r*h*d)/_,e[1]=(l*v*y-h*d*y-l*c*p+o*d*p+h*c*g-o*v*g)/_,e[5]=(a*d*y-s*v*y+s*c*p-n*d*p-a*c*g+n*v*g)/_,e[9]=(s*h*y-a*l*y-s*o*p+n*l*p+a*o*g-n*h*g)/_,e[13]=(a*l*c-s*h*c+s*o*v-n*l*v-a*o*d+n*h*d)/_,e[2]=(u*d*y-l*f*y+l*c*m-o*d*m-u*c*g+o*f*g)/_,e[6]=(s*f*y-r*d*y-s*c*m+n*d*m+r*c*g-n*f*g)/_,e[10]=(r*l*y-s*u*y+s*o*m-n*l*m-r*o*g+n*u*g)/_,e[14]=(s*u*c-r*l*c-s*o*f+n*l*f+r*o*d-n*u*d)/_,e[3]=(h*f*y-u*v*y-h*c*m+o*v*m+u*c*p-o*f*p)/_,e[7]=(r*v*y-a*f*y+a*c*m-n*v*m-r*c*p+n*f*p)/_,e[11]=(a*u*y-r*h*y-a*o*m+n*h*m+r*o*p-n*u*p)/_,e[15]=(r*h*c-a*u*c+a*o*f-n*h*f-r*o*v+n*u*v)/_,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setBasis",value:function(){}},{key:"setRotationFromEuler",value:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),u=Math.sin(n),h=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var c=a*h,f=a*l,v=s*h,d=s*l;e[0]=o*h,e[4]=-o*l,e[8]=u,e[1]=f+v*u,e[5]=c-d*u,e[9]=-s*o,e[2]=d-c*u,e[6]=v+f*u,e[10]=a*o}else if("YXZ"===t.order){var y=o*h,m=o*l,p=u*h,g=u*l;e[0]=y+g*s,e[4]=p*s-m,e[8]=a*u,e[1]=a*l,e[5]=a*h,e[9]=-s,e[2]=m*s-p,e[6]=g+y*s,e[10]=a*o}else if("ZXY"===t.order){var _=o*h,x=o*l,M=u*h,k=u*l;e[0]=_-k*s,e[4]=-a*l,e[8]=M+x*s,e[1]=x+M*s,e[5]=a*h,e[9]=k-_*s,e[2]=-a*u,e[6]=s,e[10]=a*o}else if("ZYX"===t.order){var w=a*h,b=a*l,A=s*h,E=s*l;e[0]=o*h,e[4]=A*u-b,e[8]=w*u+E,e[1]=o*l,e[5]=E*u+w,e[9]=b*u-A,e[2]=-u,e[6]=s*o,e[10]=a*o}else if("YZX"===t.order){var z=a*o,S=a*u,P=s*o,C=s*u;e[0]=o*h,e[4]=C-z*l,e[8]=P*l+S,e[1]=l,e[5]=a*h,e[9]=-s*h,e[2]=-u*h,e[6]=S*l+P,e[10]=z-C*l}else if("XZY"===t.order){var T=a*o,I=a*u,F=s*o,L=s*u;e[0]=o*h,e[4]=-l,e[8]=u*h,e[1]=T*l+L,e[5]=a*h,e[9]=I*l-F,e[2]=F*l-I,e[6]=s*h,e[10]=L*l+T}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"setRotationFromQauternion",value:function(t){return this.compose(st,t,ot)}},{key:"setRotationFromAxisAngle",value:function(t,e){}},{key:"setRotationX",value:function(){}},{key:"setRotationY",value:function(){}},{key:"setRotationZ",value:function(){}},{key:"translate",value:function(t,e,i){var n=this.elements;return n[12]+=n[0]*t+n[4]*e+n[8]*i,n[13]+=n[1]*t+n[5]*e+n[9]*i,n[14]+=n[2]*t+n[6]*e+n[10]*i,n[15]+=n[3]*t+n[7]*e+n[11]*i,this}},{key:"setTranslate",value:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1)}},{key:"scale",value:function(t,e,i){var n=this.elements;return n[0]*=t,n[4]*=e,n[8]*=i,n[1]*=t,n[5]*=e,n[9]*=i,n[2]*=t,n[6]*=e,n[10]*=i,n[3]*=t,n[7]*=e,n[11]*=i,this}},{key:"setScale",value:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}},{key:"lookAt",value:function(t,e,i){var n=this.elements;return rt.setFromVectorsDiff(t,e),0===rt.lengthSquared()&&(rt.z=1),rt.normalize(),it.setFromVectorsCross(i,rt),0===it.lengthSquared()&&(1===Math.abs(i.z)?rt.x+=1e-4:rt.z+=1e-4,rt.normalize(),it.setFromVectorsCross(i,rt)),it.normalize(),nt.setFromVectorsCross(rt,it),n[0]=it.x,n[4]=nt.x,n[8]=rt.x,n[1]=it.y,n[5]=nt.y,n[9]=rt.y,n[2]=it.z,n[6]=nt.z,n[10]=rt.z,this}},{key:"setPerspective",value:function(t,e,i,n,r,a){var s=this.elements;return s[0]=2*r/(e-t),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2*r/(i-n),s[6]=0,s[7]=0,s[8]=(e+t)/(e-t),s[9]=(i+n)/(i-n),s[10]=-(a+r)/(a-r),s[11]=-1,s[12]=0,s[13]=0,s[14]=-2*r*a/(a-r),s[15]=0,this}},{key:"setOrthographic",value:function(t,e,i,n,r,a){var s=this.elements;return s[0]=2/(e-t),s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=2/(i-n),s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=-2/(a-r),s[11]=0,s[12]=-(e+t)/(e-t),s[13]=-(i+n)/(i-n),s[14]=-(a+r)/(a-r),s[15]=1,this}},{key:"compose",value:function(t,e,i){var n=this.elements,r=e.x,a=e.y,s=e.z,o=e.w,u=i.x,h=i.y,l=i.z;return n[0]=(1-2*a*a-2*s*s)*u,n[1]=(2*r*a+2*s*o)*u,n[2]=(2*r*s-2*a*o)*u,n[3]=0,n[4]=(2*r*a-2*s*o)*h,n[5]=(1-2*r*r-2*s*s)*h,n[6]=(2*a*s+2*r*o)*h,n[7]=0,n[8]=(2*r*s+2*a*o)*l,n[9]=(2*a*s-2*r*o)*l,n[10]=(1-2*r*r-2*a*a)*l,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}},{key:"decompose",value:function(t,e,i){var n=this.elements,r=et.set(n[0],n[1],n[2]).length(),a=et.set(n[4],n[5],n[6]).length(),s=et.set(n[8],n[9],n[10]).length();i.set(r,a,s),t.set(n[12],n[13],n[14]),at.copy(this);var o=at.elements;return o[0]/=r,o[1]/=r,o[2]/=r,o[4]/=a,o[5]/=a,o[6]/=a,o[8]/=s,o[9]/=s,o[10]/=s,e.setFromRotationMatrix(at),this}},{key:"extractRotation",value:function(t){var e=this.elements,i=t.elements,n=et.set(i[0],i[1],i[2]).length(),r=et.set(i[4],i[5],i[6]).length(),a=et.set(i[8],i[9],i[10]).length();return e[0]=i[0]/n,e[4]=i[4]/r,e[8]=i[8]/a,e[12]=0,e[1]=i[1]/n,e[5]=i[5]/r,e[9]=i[9]/a,e[13]=0,e[2]=i[2]/n,e[6]=i[6]/r,e[10]=i[10]/a,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this}}]),t}(),et=new $,it=new $,nt=new $,rt=new $,at=new tt,st=new $(0,0,0),ot=new $(1,1,1),ut=function(){function t(){s()(this,t),this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])}return u()(t,[{key:"set",value:function(t,e,i,n,r,a,s,o,u){var h=this.elements;return h[0]=t,h[3]=e,h[6]=i,h[1]=n,h[4]=r,h[7]=a,h[2]=s,h[5]=o,h[8]=u,this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"setInverseOf",value:function(t){var e=t.elements,i=this.elements,n=e[0],r=e[3],a=e[6],s=e[1],o=e[4],u=e[7],h=e[2],l=e[5],c=e[8],f=this.determinant();return i[0]=(o*c-u*l)/f,i[1]=(u*h-s*c)/f,i[2]=(s*l-o*h)/f,i[3]=(a*l-r*c)/f,i[4]=(n*c-a*h)/f,i[5]=(r*h-n*l)/f,i[6]=(r*u-a*o)/f,i[7]=(a*s-n*u)/f,i[8]=(n*o-r*s)/f,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],i=t[3],n=t[6],r=t[1],a=t[4],s=t[7],o=t[2],u=t[5],h=t[8];return e*a*h-e*s*u-i*r*h+i*s*o+n*r*u-n*a*o}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).setInverseOf(this).transpose()}}]),t}(),ht=Math.PI/180,lt=180/Math.PI;function ct(t,e,i){return Math.min(i,Math.max(e,t))}function ft(t){return t*ht}function vt(t){return t*lt}function dt(t){if(0===t.length)return-1/0;for(var e=t[0],i=1,n=t.length;i<n;i++)t[i]>e&&(e=t[i]);return e}var yt="XYZ",mt=new tt,pt=new X,gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yt;s()(this,t),this._x=e,this._y=i,this._z=n,this._order=r}return u()(t,[{key:"set",value:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this}},{key:"copy",value:function(t){return this.set(t.x,t.y,t.z,t.order)}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"setFromRotationMatrix",value:function(t,e){var i=t.elements,n=i[0],r=i[4],a=i[8],s=i[1],o=i[5],u=i[9],h=i[2],l=i[6],c=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(ct(a,-1,1)),Math.abs(a)<1-Number.EPSILON?(this._x=Math.atan2(-u,c),this._z=Math.atan2(-r,n)):(this._x=Math.atan2(l,o),this._z=0)):"YXZ"===e?(this._x=Math.asin(-ct(u,-1,1)),Math.abs(u)<1-Number.EPSILON?(this._y=Math.atan2(a,c),this._z=Math.atan2(s,o)):(this._y=Math.atan2(-h,n),this._z=0)):"ZXY"===e?(this._x=Math.asin(ct(l,-1,1)),Math.abs(l)<1-Number.EPSILON?(this._y=Math.atan2(-h,c),this._z=Math.atan2(-r,o)):(this._y=0,this._z=Math.atan2(s,n))):"ZYX"===e?(this._y=Math.asin(-ct(h,-1,1)),Math.abs(h)<1-Number.EPSILON?(this._x=Math.atan2(l,c),this._z=Math.atan2(s,n)):(this._x=0,this._z=Math.atan2(-r,o))):"YZX"===e?(this._z=Math.asin(ct(s,-1,1)),Math.abs(s)<1-Number.EPSILON?(this._x=Math.atan2(-u,o),this._y=Math.atan2(-h,n)):(this._x=0,this._y=Math.atan2(a,c))):"XZY"===e?(this._z=Math.asin(-ct(r,-1,1)),Math.abs(r)<1-Number.EPSILON?(this._x=Math.atan2(l,o),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-u,c),this._y=0)):console.warn("Euler.setFromRotationMatrix：不支持的参数值order=".concat(e,"$")),this._order=e,this}},{key:"setFromQuaternion",value:function(t,e){return mt.setRotationFromQauternion(t),this.setFromRotationMatrix(mt,e)}},{key:"reorder",value:function(t){return pt.setFromEuler(this),this.setFromQuaternion(pt,t)}},{key:"setFromVector3",value:function(t,e){return this.set(t.x,t.y,t.z,e||this.order)}},{key:"x",set:function(t){this._x=t},get:function(){return this._x}},{key:"y",set:function(t){this._y=t},get:function(){return this._y}},{key:"z",set:function(t){this._z=t},get:function(){return this._z}},{key:"order",set:function(t){this._order=t},get:function(){return this._order}}]),t}(),_t=new $,xt=new $,Mt=new X,kt=new tt,wt=0,bt=!1;try{bt=void 0!==Proxy}catch(t){console.error("浏览器不支持Proxy！")}var At=function(){function t(){s()(this,t),this.uid=++wt,this.children=[],this.parent=null,this.matrix=new tt,this.worldMatrix=new tt,this.modelViewMatrix=new tt,this.normalMatrix=new ut,this.position=new $,this.scale=new $(1,1,1);var e=new gt,i=bt&&new Proxy(e,{set:function(t,e,i){return t[e]=i,n.setFromEuler(t),!0}}),n=new X,r=bt&&new Proxy(n,{set:function(t,i,n){return t[i]=n,e.setFromQuaternion(t),!0}});this.rotation=bt?i:e,this.quaternion=bt?r:n,this.up=new $(0,1,0),this.matrixAutoUpdate=!0,this._worldMatrixNeedsUpdate=!1,this.visible=!0}return u()(t,[{key:"add",value:function(t){null!=t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t)}},{key:"remove",value:function(t){var e=this.children.indexOf(t);e>=0&&(t.parent=null,this.children.splice(e,1))}},{key:"traverse",value:function(t){for(var e=this.children,i=0,n=e.length;i<n;i++){var r=e[i],a=t(r);if(!1===a)return a;if(!1===(a=r.traverse(t)))return a}}},{key:"getChildByUid",value:function(t){var e=null;return this.traverse((function(i){if(i.uid===t)return e=i,!1})),e}},{key:"getChildByName",value:function(t){var e=null;return this.traverse((function(i){if(i.name===t)return e=i,!1})),e}},{key:"update",value:function(){}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this._worldMatrixNeedsUpdate=!0}},{key:"updateWorldMatrix",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this._worldMatrixNeedsUpdate||t)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiplyMatrices(this.parent.worldMatrix,this.matrix),this._worldMatrixNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateWorldMatrix(t)}},{key:"updateRelativeWorldMatrix",value:function(t,e){if(!0===t&&null!==this.parent&&this.parent.updateRelativeWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiplyMatrices(this.parent.worldMatrix,this.matrix),!0===e)for(var i=this.children,n=0,r=i.length;n<r;n++)i[n].updateRelativeWorldMatrix(!1,!0)}},{key:"lookAt",value:function(t,e,i){1===arguments.length?_t.copy(t):_t.set(t,e,i),this.updateRelativeWorldMatrix(!0,!1),xt.setFromMatrixPosition(this.worldMatrix),this.isCamera||this.isLight?kt.lookAt(xt,_t,this.up):kt.lookAt(_t,xt,this.up),this.quaternion.setFromRotationMatrix(kt);var n=this.parent;n&&(kt.extractRotation(n.worldMatrix),Mt.setFromRotationMatrix(kt),this.quaternion.premultiply(Mt.inverse()))}},{key:"applyMatrix",value:function(t){this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"rotateOnAxis",value:function(t,e){return Mt.setFromAxisAngle(t,e),this.quaternion.multiply(Mt),this}},{key:"rotateOnWorldAxis",value:function(t,e){return Mt.setFromAxisAngle(t,e),this.quaternion.premultiply(Mt),this}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.worldMatrix.copy(t.worldMatrix),this._worldMatrixNeedsUpdate=t._worldMatrixNeedsUpdate,!0===e)for(var i=0,n=t.children.length;i<n;i++){var r=t.children[i];this.add(r.clone(e))}return this}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}}]),t}(),Et=function(t){function e(){var t;return s()(this,e),(t=R()(this,j()(e).call(this))).isCamera=!0,t.projectionMatrix=new tt,t.projectionMatrixInverse=new tt,t.inverseWorldMatrix=new tt,t}return U()(e,t),u()(e,[{key:"updateWorldMatrix",value:function(){J()(j()(e.prototype),"updateWorldMatrix",this).call(this),this.inverseWorldMatrix.setInverseOf(this.worldMatrix)}}]),e}(At),zt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return s()(this,e),(t=R()(this,j()(e).call(this))).type=_,t.left=i,t.right=n,t.top=r,t.bottom=a,t.near=o,t.far=u,t.zoom=1,t.updateProjectionMatrix(),t}return U()(e,t),u()(e,[{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,a=i+t,s=n+e,o=n-e;this.projectionMatrix.setOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.setInverseOf(this.projectionMatrix)}}]),e}(Et),St=function(t){function e(t,i,n,r){var a;return s()(this,e),(a=R()(this,j()(e).call(this))).type=g,a.fovy=void 0===t?45*Math.PI/180:t,a.aspect=void 0===i?1:i,a.near=void 0===n?.1:n,a.far=void 0===r?1e3:r,a.updateProjectionMatrix(),a}return U()(e,t),u()(e,[{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*this.fovy),i=2*e,n=this.aspect*i,r=-.5*n;this.projectionMatrix.setPerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.setInverseOf(this.projectionMatrix)}}]),e}(Et);var Pt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;s()(this,t),this.radius=e,this._theta=i,this._phi=n}return u()(t,[{key:"set",value:function(t,e,i){return this.radius=t,this.theta=e,this.phi=i,this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,i){var n,r,a;return this.radius=Math.sqrt(t*t+e*e+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.acos((n=e/this.radius,r=-1,a=1,Math.min(a,Math.max(r,n)))),this.phi=Math.atan2(t,i)),this}},{key:"theta",get:function(){return this._theta},set:function(t){this._theta=Math.max(1e-6,Math.min(t,Math.PI-1e-6))}},{key:"phi",get:function(){return this._phi},set:function(t){this._phi=t}}]),t}(),Ct=new $,Tt=new Pt,It=function(){function t(e,i){s()(this,t),this.object=e,this.domElement=i,this.target=new $(0,0,0),this.enablePan=!0,this.panSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.minThetaAngle=0,this.maxThetaAngle=1/0,this.minPhiAngle=-1/0,this.maxPhiAngle=1/0,this.enableZoom=!0,this.zoomSpeed=1,this.minZoom=0,this.maxZoom=1/0,this.minDistance=0,this.maxDistance=1/0,this._panOffset=new $,this._deltaTheta=0,this._deltaPhi=0,this._scale=1,i.addEventListener("mousedown",this,!1),i.addEventListener("mousemove",this,!1),i.addEventListener("mouseup",this,!1),i.addEventListener("mouseout",this,!1),i.addEventListener("wheel",this,!1),document.addEventListener("keydown",this,!1),document.addEventListener("keyup",this,!1)}return u()(t,[{key:"handleEvent",value:function(t){switch(t.type){case"mousedown":this._handleMouseDown(t);break;case"mousemove":this._handleMouseMove(t);break;case"mouseup":case"mouseout":this._handleMouseUp(t);break;case"wheel":this._handleMouseWheel(t);break;case"keydown":this._handleKeyDown(t);break;case"keyup":this._handleKeyUp(t)}}},{key:"getMousePosition",value:function(t){return[t.clientX,t.clientY]}},{key:"update",value:function(){var t=this.object.position;Ct.copy(t).sub(this.target),Tt.setFromVector3(Ct),Tt.theta+=this._deltaTheta,Tt.theta=Math.max(this.minThetaAngle,Math.min(this.maxThetaAngle,Tt.theta)),Tt.phi+=this._deltaPhi,Tt.phi=Math.max(this.minPhiAngle,Math.min(this.maxPhiAngle,Tt.phi)),Tt.radius*=this._scale,Tt.radius=Math.max(this.minDistance,Math.min(this.maxDistance,Tt.radius)),this.target.add(this._panOffset),Ct.setFromSpherical(Tt),t.copy(this.target).add(Ct),this.object.lookAt(this.target),this.object.updateWorldMatrix()}},{key:"panLeft",value:function(t){var e=this.object.matrix;Ct.setFromMatrix4Column(e,0).multiplyScalar(-t),this._panOffset.add(Ct)}},{key:"panUp",value:function(t){var e=this.object.matrix;Ct.setFromMatrix4Column(e,1).multiplyScalar(t),this._panOffset.add(Ct)}},{key:"rotateLeft",value:function(t){this._deltaPhi-=t}},{key:"rotateUp",value:function(t){this._deltaTheta-=t}},{key:"_handleMouseDown",value:function(t){this._dragging=!0,this._lastMousePosition=this.getMousePosition(t)}},{key:"_handleMouseMove",value:function(t){if(this._dragging){var e=this.object,i=this.domElement,n=i.clientWidth,r=i.clientHeight,a=this.getMousePosition(t),s=a[0]-this._lastMousePosition[0],o=a[1]-this._lastMousePosition[1];if(this.enablePan&&this._shiftKeyDown)if(s*=this.panSpeed,o*=this.panSpeed,e.type===g){var u,h=e.position;Ct.copy(h).sub(this.target),u=Ct.length(),u*=Math.tan(.5*e.fovy),this.panLeft(s*(u/(n/2))),this.panUp(o*(u/(r/2)))}else e.type===_?(this.panLeft(s*((e.right-e.left)/n)),this.panUp(o*((e.top-e.bottom)/r))):(console.warn("object不是camera，不支持pan操作"),this.enablePan=!1);else{var l=this.rotateSpeed,c=2*Math.PI*o/r,f=2*Math.PI*s/n;this.rotateLeft(l*f),this.rotateUp(l*c)}this.update(),this._panOffset.set(0,0,0),this._deltaTheta=0,this._deltaPhi=0,this._lastMousePosition=a}}},{key:"_handleMouseUp",value:function(){this._dragging=!1}},{key:"_handleMouseWheel",value:function(t){if(this.object.type===g){var e=this._scale;t.deltaY>0?e/=Math.pow(.95,this.zoomSpeed):t.deltaY<0&&(e*=Math.pow(.95,this.zoomSpeed)),this._scale=e}else if(this.object.type===_){var i=this.object.zoom;t.deltaY>0?i*=Math.pow(.95,this.zoomSpeed):t.deltaY<0&&(i/=Math.pow(.95,this.zoomSpeed)),this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,i)),this.object.updateProjectionMatrix()}this.update(),this._scale=1}},{key:"_handleKeyDown",value:function(t){t.shiftKey&&!t.ctrlKey&&(this._shiftKeyDown=!0)}},{key:"_handleKeyUp",value:function(){this._shiftKeyDown=!1}},{key:"destroy",value:function(){this.domElement.removeEventListener("mousedown",this),this.domElement.removeEventListener("mousemove",this),this.domElement.removeEventListener("mouseup",this),this.domElement.removeEventListener("mouseout",this),this.domElement.removeEventListener("wheel",this),document.removeEventListener("keydown",this),document.removeEventListener("keyup",this)}}]),t}(),Ft=function(){function t(){s()(this,t),this._max=new $(-1/0,-1/0,-1/0),this._min=new $(1/0,1/0,1/0)}return u()(t,[{key:"setEmpty",value:function(){return this._max.set(-1/0,-1/0,-1/0),this._min.set(1/0,1/0,1/0),this}},{key:"copy",value:function(t){return this._max.copy(t.max),this._min.copy(t.min),this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"setFromObject",value:function(t){return this.setEmpty(),this.expandByObject(t),this}},{key:"expandByObject",value:function(t){t.updateRelativeWorldMatrix(!1,!1);var e=t.geometry;if(e){var i=e.getBoundingBox();Lt.copy(i),Lt.applyMatrix4(t.worldMatrix),this.expandByPoint(Lt.max),this.expandByPoint(Lt.min)}for(var n=t.children,r=0,a=n.length;r<a;r++)this.expandByObject(n[r]);return this}},{key:"setFromPoints",value:function(t){this.setEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}},{key:"expandByPoint",value:function(t){return this._max.max(t),this._min.min(t),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,u=t.count;o<u;o++){var h=t.getX(o),l=t.getY(o),c=t.getZ(o);h<e&&(e=h),l<i&&(i=l),c<n&&(n=c),h>r&&(r=h),l>a&&(a=l),c>s&&(s=c)}return this.min.set(e,i,n),this.max.set(r,a,s),this}},{key:"getSize",value:function(){var t=new $;return this.isEmpty()?t.set(0,0,0):t.setFromVectorsDiff(this._max,this._min),t}},{key:"getCenter",value:function(){var t=new $;return this.isEmpty()?t.set(0,0,0):t.setFromVectorsSum(this._min,this._max).multiplyScalar(.5),t}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(Ot[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ot[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ot[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ot[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ot[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ot[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ot[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ot[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ot)),this}},{key:"max",get:function(){return this._max}},{key:"min",get:function(){return this._min}}]),t}(),Lt=new Ft,Ot=[new $,new $,new $,new $,new $,new $,new $,new $],Rt=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"STATIC_DRAW";s()(this,t),this.name=void 0,this.array=e,this.target=o,this.itemSize=i,this.count=e.length/i,this.normalized=n,this.usage=u,this.glType=this.getGLType(e),this.bytesPerElement=e.BYTES_PER_ELEMENT,this.offset=a,this.stride=r}return u()(t,[{key:"getGLType",value:function(t){var e;return t instanceof Float32Array?e="FLOAT":t instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array."):t instanceof Uint16Array?e="UNSIGNED_SHORT":t instanceof Int16Array?e="SHORT":t instanceof Uint32Array?e="UNSIGNED_INT":t instanceof Int32Array?e="INT":t instanceof Int8Array?e="BYTE":t instanceof Uint8Array&&(e="UNSIGNED_BYTE"),e}},{key:"getX",value:function(t){return this.array[this.itemSize*t]}},{key:"getY",value:function(t){return this.array[this.itemSize*t+1]}},{key:"getZ",value:function(t){return this.array[this.itemSize*t+2]}},{key:"getW",value:function(t){return this.array[this.itemSize*t+3]}},{key:"setXYZ",value:function(t,e,i,n){var r=this.itemSize*t;return this.array[r+0]=e,this.array[r+1]=i,this.array[r+2]=n,this}}]),t}(),Nt=function(){function t(){s()(this,t),this.vertices=[],this.normals=[],this.colors=[],this.indices=[],this._attributes={}}return u()(t,[{key:"setIndex",value:function(t){this.setAttribute("index",t),t.isIndex=!0}},{key:"setAttribute",value:function(t,e){this._attributes[t]=e,e.name=t}},{key:"removeAttribue",value:function(t){delete this._attributes[t]}},{key:"getAttribute",value:function(t){return this._attributes[t]}},{key:"getAttributes",value:function(){return this._attributes}},{key:"getBoundingBox",value:function(){return this._boundingBox||(this._boundingBox=this.computeBoundingBox()),this._boundingBox}},{key:"computeBoundingBox",value:function(){var t=new Ft,e=this.getAttribute("position");return e?t.setFromBufferAttribute(e):t.setEmpty(),t}},{key:"getWireframeAttribute",value:function(){if(!this._wireframeAttribute){var t=[],e=this.getAttribute("index"),i=this.getAttribute("position");if(e)for(var n=e.array,r=0,a=n.length;r<a;r+=3){var s=n[r],o=n[r+1],u=n[r+2];t.push(s,o,o,u,u,s)}else if(i)for(var h=0,l=i.array.length/3;h<l;h+=3){var c=h,f=h+1,v=h+2;t.push(c,f,f,v,v,c)}var d=dt(t)>65535?Uint32Array:Uint16Array,y=new Rt(new d(t),1);y.isIndex=!0,y.name="wireframeIndex",this._wireframeAttribute=y}return this._wireframeAttribute}}]),t}(),jt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return s()(this,e),(t=R()(this,j()(e).call(this,i,n,r,a,o,u))).numberOfVertices=0,t._buildPlane("x","y","z",1,1,i,n,r,a,o),t._buildPlane("x","y","z",1,1,i,n,-r,a,o),t._buildPlane("x","z","y",1,-1,i,r,n,a,o),t._buildPlane("x","z","y",1,-1,i,r,-n,a,o),t._buildPlane("z","y","x",1,1,r,n,i,a,o),t._buildPlane("z","y","x",1,1,r,n,-i,a,o),t.setIndex(new Rt(new Uint8Array(t.indices),1)),t.setAttribute("position",new Rt(new Float32Array(t.vertices),3)),t.setAttribute("normal",new Rt(new Float32Array(t.normals),3)),t}return U()(e,t),u()(e,[{key:"_buildPlane",value:function(t,e,i,n,r,a,s,o,u,h){for(var l=a/2,c=s/2,f=o/2,v=a/u,d=s/h,y=u+1,m=h+1,p=0,g=new $,_=0;_<m;_++)for(var x=_*d-c,M=0;M<y;M++){var k=M*v-l;g[t]=k*n,g[e]=x*r,g[i]=f,this.vertices.push(g.x,g.y,g.z),g[t]=0,g[e]=0,g[i]=o>0?1:-1,this.normals.push(g.x,g.y,g.z),p++}for(var w=0;w<h;w++)for(var b=0;b<u;b++){var A=this.numberOfVertices,E=A+b+y*w,z=A+b+y*(w+1),S=A+(b+1)+y*(w+1),P=A+(b+1)+y*w;this.indices.push(E,P,S),this.indices.push(E,S,z)}this.numberOfVertices+=p}}]),e}(Nt),Bt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];s()(this,e);var r=i/2,a=n/2;return(t=R()(this,j()(e).call(this))).vertices.push(r,a,0,-r,a,0,-r,-a,0,r,-a,0),t.indices.push(0,1,3,1,2,3),t.setIndex(new Rt(new Uint8Array(t.indices),1)),t.setAttribute("position",new Rt(new Float32Array(t.vertices),3)),t}return U()(e,t),e}(Nt),Ut=new $,Dt=function(t){function e(t){var i;s()(this,e),i=R()(this,j()(e).call(this,t));for(var n=t.getAttribute("index"),r=t.getAttribute("position"),a=0,o=n?n.count:r.count;a<o;a+=3)for(var u=0;u<3;u++){var h=void 0,l=void 0;n?(h=n.getX(a+u),l=n.getX(a+(u+1)%3)):(h=a+u,l=a+(u+1)%3),Ut.setFromBufferAttribute(r,h),i.vertices.push(Ut.x,Ut.y,Ut.z),Ut.setFromBufferAttribute(r,l),i.vertices.push(Ut.x,Ut.y,Ut.z)}return i.setAttribute("position",new Rt(new Float32Array(i.vertices),3)),i}return U()(e,t),e}(Nt),Gt=function(t){function e(t,i){var n;return s()(this,e),(n=R()(this,j()(e).call(this))).geometry=t,n.material=i,n.type=M,n.drawMode=c,n}return U()(e,t),e}(At),Vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wt=function(){function t(e,i,n){s()(this,t),1===arguments.length?this.set(e):this.setRGB(e,i,n)}return u()(t,[{key:"set",value:function(e){return e instanceof t?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e?this.setStyle(e):Array.isArray(e)?this.setFromArray(e):console.warn("Color: 错误的参数(".concat(e,")")),this}},{key:"setRGB",value:function(t,e,i){return this.r=t,this.g=e,this.b=i,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setStyle",value:function(t){var e;if(e=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(t)){var i,n=e[1],r=e[2];"rgb"!==n&&"rgba"!==n||((i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))?(this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,parseFloat(i[5])<1&&console.warn("Alpha component of "+t+" will be ignored.")):(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))&&(this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,parseFloat(i[5])<1&&console.warn("Alpha component of "+t+" will be ignored.")))}else if(e=/^#([A-Fa-f0-9]+)$/.exec(t)){var a=e[1],s=a.length;3===s?(this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255):6===s&&(this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255)}else t&&t.length>0&&this.setColorName(t);return this}},{key:"setColorName",value:function(t){var e=Vt[t];return void 0!==e?this.setHex(e):console.warn("Unknown color "+t),this}},{key:"setFromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e+0]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}}]),t}(),Yt=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,t),this.type=z,e.color&&(this.color=new Wt(e.color)),this.vertexColors=!0===e.vertexColors,this.precision=null,this.wireframe=e.wireframe},qt=function(t){function e(t){var i;return s()(this,e),(i=R()(this,j()(e).call(this,t))).type=S,i}return U()(e,t),e}(Yt),Xt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;s()(this,e);var i=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Nt;n.setAttribute("position",new Rt(new Float32Array(i),3)),n.setAttribute("color",new Rt(new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),3));var r=new qt({vertexColors:!0});return R()(this,j()(e).call(this,n,r))}return U()(e,t),e}(Gt),Ht=new Et,Zt=new $,Kt=function(t){function e(t){var i;s()(this,e);var n=[],r=[],a={},o=new Wt(16755200),u=new Wt(16711680),h=new Wt(43775),l=new Wt(16777215),c=new Wt(3355443);function f(t,e,i){v(t,i),v(e,i)}function v(t,e){n.push(0,0,0),r.push(e.r,e.g,e.b),void 0===a[t]&&(a[t]=[]),a[t].push(n.length/3-1)}f("p","n1",u),f("p","n2",u),f("p","n3",u),f("p","n4",u),f("n1","n2",o),f("n2","n3",o),f("n3","n4",o),f("n4","n1",o),f("f1","f2",o),f("f2","f3",o),f("f3","f4",o),f("f4","f1",o),f("n1","f1",o),f("n2","f2",o),f("n3","f3",o),f("n4","f4",o),f("u1","u2",h),f("u2","u3",h),f("u3","u1",h),f("p","c",l),f("c","t",l),f("cn1","cn3",c),f("cn2","cn4",c),f("cf1","cf3",c),f("cf2","cf4",c);var d=new Nt;d.setAttribute("position",new Rt(new Float32Array(n),3)),d.setAttribute("color",new Rt(new Float32Array(r),3));var y=new qt({vertexColors:!0});return(i=R()(this,j()(e).call(this,d,y)))._pointMap=a,i._camera=t,i.matrix=t.worldMatrix,i.matrixAutoUpdate=!1,i.update(),i}return U()(e,t),u()(e,[{key:"update",value:function(){var t=this.geometry.getAttribute("position"),e=this._pointMap;function i(i,n,r,a){Zt.set(n,r,a).unproject(Ht);var s=e[i];if(s&&t)for(var o=0,u=s.length;o<u;o++)t.setXYZ(s[o],Zt.x,Zt.y,Zt.z)}this._camera.updateProjectionMatrix(),Ht.projectionMatrixInverse.copy(this._camera.projectionMatrixInverse),i("c",0,0,-1),i("t",0,0,1),i("n1",1,1,-1),i("n2",-1,1,-1),i("n3",-1,-1,-1),i("n4",1,-1,-1),i("f1",1,1,1),i("f2",-1,1,1),i("f3",-1,-1,1),i("f4",1,-1,1),i("u1",.7,1.1,-1),i("u2",0,2,-1),i("u3",-.7,1.1,-1),i("cn1",0,1,-1),i("cn2",-1,0,-1),i("cn3",0,-1,-1),i("cn4",1,0,-1),i("cf1",0,1,1),i("cf2",-1,0,1),i("cf3",0,-1,1),i("cf4",1,0,1),t.needsUpdate=!0}}]),e}(Gt),Qt=function(t){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ccc",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ff3352",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#2890ff";s()(this,e);var o=t/2,u=t/i,h=[],l=[],c=i/2;n=new Wt(n),r=new Wt(r),a=new Wt(a);for(var f=0,v=-o;f<=i;f++,v+=u)h.push(-o,0,v,o,0,v),f===c?(r.toArray(l,l.length),r.toArray(l,l.length)):(n.toArray(l,l.length),n.toArray(l,l.length)),h.push(v,0,-o,v,0,o),f===c?(a.toArray(l,l.length),a.toArray(l,l.length)):(n.toArray(l,l.length),n.toArray(l,l.length));var d=new Nt;d.setAttribute("position",new Rt(new Float32Array(h),3)),d.setAttribute("color",new Rt(new Float32Array(l),3));var y=new qt({vertexColors:!0});return R()(this,j()(e).call(this,d,y))}return U()(e,t),e}(Gt),Jt=function(t){function e(t){var i;return s()(this,e),(i=R()(this,j()(e).call(this,t))).pointSize=t.pointSize,i}return U()(e,t),e}(Yt),$t=function(t){function e(){var t;return s()(this,e),(t=R()(this,j()(e).call(this))).type=A,t}return U()(e,t),e}(At),te=function(t){function e(t,i){var n;return s()(this,e),(n=R()(this,j()(e).call(this))).geometry=t,n.material=i,n.type=x,n}return U()(e,t),u()(e,[{key:"update",value:function(){this.geometry.update(),this.material.update()}}]),e}(At),ee=function(t){function e(t,i){var n;return s()(this,e),(n=R()(this,j()(e).call(this))).geometry=t,n.material=i,n.type=p,n}return U()(e,t),u()(e,[{key:"clone",value:function(t){return new this.constructor(this.geometry,this.material).copy(this,t)}}]),e}(At),ie=function(t){function e(t,i){var n;return s()(this,e),(n=R()(this,j()(e).call(this))).geometry=t,n.material=i,n.type=w,n}return U()(e,t),e}(At),ne=function(t){function e(t,i){var n;return s()(this,e),(n=R()(this,j()(e).call(this))).geometry=t,n.material=i,n.type=b,n}return U()(e,t),e}(At),re=function(t){function e(){var t;return s()(this,e),(t=R()(this,j()(e).call(this))).type=E,t}return U()(e,t),e}(At),ae=function(){function t(e){s()(this,t),this._gl=e,this._buffers=new WeakMap}return u()(t,[{key:"createBuffer",value:function(t){var e=this._gl,i=t.array,n=t.usage,r=t.target,a=e.createBuffer();return"string"==typeof n&&(t.usage=n=e[n]),"string"==typeof t.glType&&(t.glType=e[t.glType]),void 0===r&&(r=!0===t.isIndex?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,t.target=r),e.bindBuffer(r,a),e.bufferData(r,i,n),a}},{key:"get",value:function(t){var e=this._buffers.get(t);return e||(e=this.createBuffer(t),this._buffers.set(t,e)),e}},{key:"remove",value:function(t){var e=this.get(t);e&&(this._gl.deleteBuffer(e),this._buffers.delete(t))}},{key:"update",value:function(){}},{key:"destroy",value:function(){this._gl=null,this._buffers=null}}]),t}(),se=function(){function t(e,i){var n=i.precision,r=void 0===n?"highp":n;s()(this,t),this._gl=e;var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;this.isWebGL2=a;var o=this.getMaxPrecision(r);o!==r&&(r=o),this.precision=r}return u()(t,[{key:"getMaxPrecision",value:function(t){var e=this._gl;if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}}]),t}(),oe=function(){function t(e,i,n){s()(this,t),this._path=e,this._source=i,this._dependencies=n,this._compiled=!1}return u()(t,[{key:"getDependency",value:function(t){for(var e=0,i=this._dependencies,n=i.length;e<n;e++){var r=i[e];if(r._path===t)return r}}},{key:"compile",value:function(){if(!this._compiled){for(var t,e=/#include\s+['"]([^'"]*)['"]/g,i=this._source,n=[],r=this._source;null!==(t=e.exec(i));){var a=t[1],s=this.getDependency(a);s&&n.push([t[0],s.compile()])}for(var o=0,u=n.length;o<u;o++){var h=n[o];r=r.replace(h[0],h[1])}this._source=r,this._compiled=!0}return this._source}}]),t}(),ue=new oe("./base.vert","attribute vec4 position;\r\nattribute vec3 normal;\r\nuniform mat4 modelMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform mat3 normalMatrix;\r\nvarying vec3 vNormal;\r\nvoid main() {\r\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\r\n    vNormal = normalMatrix * normal;\r\n}",[]),he=new oe("./base.frag","uniform vec3 diffuse;\r\nvarying vec3 vNormal;\r\n\r\nvoid main() {\r\n    vec4 diffuseColor = vec4(diffuse, 1);\r\n    vec4 lightColor = vec4(1, 1, 1, 1);\r\n    vec3 lightDirection = normalize(vec3(0.5, 3, 4));\r\n    vec4 ambientColor = vec4(0.2, 0.2, 0.2, 1);\r\n    vec3 normal = normalize(vNormal);\r\n    float fDot = max(dot(lightDirection, normal), 0.0);\r\n    vec4 ambient = ambientColor * diffuseColor;\r\n    gl_FragColor = vec4((lightColor * diffuseColor * fDot).xyz + ambient.xyz, diffuseColor.a);\r\n}",[]),le="\nattribute vec4 a_Position;\nattribute vec4 a_Color;\nattribute float a_PointSize;\nvarying vec4 v_Color;\nuniform mat4 u_MVPMatrix;\nvoid main() {\n    gl_Position = u_MVPMatrix * a_Position;\n    gl_PointSize = a_PointSize;\n    v_Color = a_Color;\n}\n",ce="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec4 v_Color;\nvoid main() {\n    float dist = distance(gl_PointCoord, vec2(0.5, 0.5));\n    if (dist < 0.5) {\n        gl_FragColor = v_Color;\n    } else {\n        discard;\n    }\n}\n",fe=new oe("./chunks/colorHead.vert","#ifdef USE_COLOR\r\n    varying vec3 vColor;\r\n    attribute vec3 color;\r\n#endif",[]),ve=new oe("./chunks/colorMain.vert","#ifdef USE_COLOR\r\n    vColor = color;\r\n#endif",[]),de=new oe("./line.vert","#include './chunks/colorHead.vert'\r\n\r\nattribute vec4 position;\r\nuniform mat4 modelMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\nvoid main() {\r\n\r\n    #include './chunks/colorMain.vert'\r\n\r\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * position;\r\n\r\n}",[fe,ve]),ye=new oe("./chunks/colorHead.frag","#ifdef USE_COLOR\r\n    varying vec3 vColor;\r\n#endif",[]),me=new oe("./chunks/colorMain.frag","#ifdef USE_COLOR\r\n    diffuseColor.rgb *= vColor;\r\n#endif",[]),pe=new oe("./line.frag",'#include "./chunks/colorHead.frag"\r\n\r\nuniform vec3 diffuse;\r\n\r\nvoid main() {\r\n\r\n    vec4 diffuseColor = vec4(diffuse, 1);\r\n\r\n    #include "./chunks/colorMain.frag"\r\n\r\n    gl_FragColor = diffuseColor;\r\n\r\n}',[ye,me]),ge={base:{vertex:ue,fragment:he},points:{vertex:le,fragment:ce},line:{vertex:de,fragment:pe}};function _e(t,e,i){t.uniform1fv(e,i)}function xe(t,e,i){t.uniform2fv(e,i)}function Me(t,e,i){t.uniform3fv(e,i)}function ke(t,e,i){t.uniform4fv(e,i)}function we(t,e,i){t.uniformMatrix2fv(e,!1,i)}function be(t,e,i){t.uniformMatrix3fv(e,!1,i)}function Ae(t,e,i){t.uniformMatrix4fv(e,!1,i)}function Ee(t,e,i){t.uniform1iv(e,i)}function ze(t,e,i){t.uniform2iv(e,i)}function Se(t,e,i){t.uniform3iv(e,i)}function Pe(t,e,i){t.uniform4iv(e,i)}var Ce=function(){function t(e,i){s()(this,t),this._info=e,this._addr=i}return u()(t,[{key:"setValue",value:function(t,e){var i=this._addr;(function(t){switch(t){case 5126:return _e;case 35664:return xe;case 35665:return Me;case 35666:return ke;case 35674:return we;case 35675:return be;case 35676:return Ae;case 5124:case 35670:return Ee;case 35667:case 35671:return ze;case 35668:case 35672:return Se;case 35669:case 35673:return Pe}})(this._info.type).call(this,t,i,e)}},{key:"calculateValue",value:function(){throw"子类没有实现方法: WebGLUnifrom.calculateValue(object, camera)"}}]),t}(),Te=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"calculateValue",value:function(t){return t.worldMatrix.elements}}]),e}(Ce),Ie=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"calculateValue",value:function(t,e){return e.inverseWorldMatrix.elements}}]),e}(Ce),Fe=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"calculateValue",value:function(t,e){return e.projectionMatrix.elements}}]),e}(Ce),Le=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"calculateValue",value:function(t){var e=t.material,i=e.color;return!0===e.wireframe?[0,0,0]:i?[i.r,i.g,i.b]:[1,1,1]}}]),e}(Ce),Oe=function(t){function e(){return s()(this,e),R()(this,j()(e).apply(this,arguments))}return U()(e,t),u()(e,[{key:"calculateValue",value:function(t){return t.normalMatrix.elements}}]),e}(Ce),Re={modelMatrix:Te,viewMatrix:Ie,projectionMatrix:Fe,diffuse:Le,normalMatrix:Oe},Ne=function(){function t(e,i){s()(this,t),this._uniformMap={};for(var n=e.getProgramParameter(i,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var a=e.getActiveUniform(i,r),o=a.name,u=e.getUniformLocation(i,o),h=Re[o];this._uniformMap[o]=new h(a,u)}}return u()(t,[{key:"getUniform",value:function(t){return this._uniformMap[t]}},{key:"eachUniform",value:function(t){var e=this._uniformMap;for(var i in e){t(e[i])}}}]),t}();function je(t){var e,i=t.precision;return"highp"===i?e="#define HIGH_PRECISION":"mediump"===i?e="#define MEDIUM_PRECISION":"lowp"===i&&(e="#define LOW_PRECISION"),"\n        precision ".concat(i," float;\n        precision ").concat(i," int;\n        ").concat(e,"\n    ")}function Be(t){return""!==t}var Ue,De=function(){function t(e,i){var n,r;s()(this,t),this._gl=e,this._attributes=null,this._uniforms=null,this.debug=!0,i.isRawShaderMaterial||(n=[je(i),i.vertexColors?"#define USE_COLOR":"","\n"].filter(Be).join("\n"),r=[je(i),i.vertexColors?"#define USE_COLOR":"","\n"].filter(Be).join("\n"));var a=ge[i.shaderType],o=n+a.vertex.compile(),u=r+a.fragment.compile(),h=this.createShader(e.VERTEX_SHADER,o),l=this.createShader(e.FRAGMENT_SHADER,u),c=this.createProgram(h,l);this._program=c,this._vertexShader=h,this._fragmentShader=l,this.usedTimes=0,e.deleteShader(h),e.deleteShader(l)}return u()(t,[{key:"createShader",value:function(t,e){var i=this._gl,n=i.createShader(t);if((i.shaderSource(n,e),i.compileShader(n),!0===this.debug)&&!i.getShaderParameter(n,i.COMPILE_STATUS)){var r=i.getShaderInfoLog(n),a=i.getShaderSource(n);console.error("创建Shader失败！错误信息：".concat(r,"\n").concat(function(t){for(var e=t.split("\n"),i=0,n=e.length;i<n;i++)e[i]=i+1+": "+e[i];return e.join("\n")}(a)))}return n}},{key:"createProgram",value:function(t,e){var i=this._gl,n=i.createProgram();if((i.attachShader(n,t),i.attachShader(n,e),i.linkProgram(n),!0===this.debug)&&!i.getProgramParameter(n,i.LINK_STATUS)){var r=i.getProgramInfoLog(n);console.error("创建program失败！错误信息：".concat(r))}return n}},{key:"getProgram",value:function(){return this._program}},{key:"getAttributes",value:function(){if(this._attributes)return this._attributes;for(var t=this._attributes={},e=this._gl,i=this._program,n=e.getProgramParameter(i,e.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var a=e.getActiveAttrib(i,r).name,s=e.getAttribLocation(i,a);t[a]=s}return t}},{key:"getUniforms",value:function(){if(this._uniforms)return this._uniforms;var t=new Ne(this._gl,this._program);return this._uniforms=t,this._uniforms}},{key:"destroy",value:function(){this._gl.deleteProgram(this._program),this._program=null,this._gl=null}}]),t}(),Ge=i(5),Ve=i.n(Ge),We=(Ue={},Ve()(Ue,z,"base"),Ve()(Ue,S,"line"),Ue),Ye=function(){function t(e,i){s()(this,t),this._gl=e,this._capabilities=i,this._programs={}}return u()(t,[{key:"getParameters",value:function(t){var e=this._capabilities,i=t.material,n=i.type,r=We[n],a=e.precision,s=e.isWebGL2;if(null!==i.precision){var o=e.getMaxPrecision(i.precision);o!==i.precision&&console.warn("不支持material.precision = ".concat(i.precision,"，将使用").concat(o))}return{isWebGL2:s,materialType:n,shaderType:r,vertexColors:i.vertexColors,precision:a}}},{key:"getProgramKey",value:function(t){var e=[];return e.push(t.shaderType),e.push(t.vertexColors),e.join()}},{key:"getProgram",value:function(t,e){var i=this._gl,n=this._programs[t];return n||(this._programs[t]=n=new De(i,e)),n}},{key:"releaseProgram",value:function(t){var e=this._programs[t];e&&(e.destroy(),this._programs.delete(t))}},{key:"destroy",value:function(){for(var t in this._gl=null,this._programs)this.releaseProgram(t);this._programs=null}}]),t}(),qe=i(7),Xe=i.n(qe),He=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.canvas,n=void 0===i?document.createElement("canvas"):i,r=e.autoClear,a=void 0===r||r,o=e.autoClearColor,u=void 0===o||o,h=e.autoClearDepth,l=void 0===h||h,c=e.autoClearStencil,f=void 0===c||c,v=e.precision;s()(this,t),this.domElement=n,this.autoClear=a,this.autoClearColor=u,this.autoClearDepth=l,this.autoClearStencil=f,this._pixelRatio=window.devicePixelRatio,this._clearColor=new Wt("black");var d=this.getContext(this.domElement),y=new se(d,{precision:v});this._capabilities=y,this._programManager=new Ye(d,y),this._bufferManager=new ae(d)}return u()(t,[{key:"getContext",value:function(){if(void 0===this._gl){for(var t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=this.domElement,i=null,n=0;n<t.length;n++){try{i=e.getContext(t[n])}catch(t){}if(i)break}i||console.error("WebGLRenderer：读取context失败！"),this._gl=i}return this._gl}},{key:"setSize",value:function(t,e,i){this._width=t,this._height=e,this.domElement.width=Math.floor(t*this._pixelRatio),this.domElement.height=Math.floor(e*this._pixelRatio),!1!==i&&(this.domElement.style.width=t+"px",this.domElement.style.height=e+"px"),this.setViewport(0,0,t,e)}},{key:"setViewport",value:function(t,e,i,n){this._gl.viewport(t,e,i,n)}},{key:"setAttributes",value:function(t,e){var i=this._gl,n=t.getAttributes(),r=e.geometry.getAttributes();for(var a in n){var s=n[a];if(s>=0){var o=r[a];if(o){var u=this._bufferManager.get(o),h=o.itemSize,l=o.glType,c=o.target,f=o.normalized,v=o.stride,d=o.offset;i.enableVertexAttribArray(s),i.bindBuffer(c,u),i.vertexAttribPointer(s,h,l,f,v,d)}}}}},{key:"setUniforms",value:function(t,e,i){var n=this._gl;t.getUniforms().eachUniform((function(t){var r=t.calculateValue(e,i);t.setValue(n,r)}))}},{key:"render",value:function(t,e){var i=this._gl,n=this._programManager;t.updateWorldMatrix(),i.enable(i.DEPTH_TEST),i.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,1),this.autoClear&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);for(var r=this.getRenderList(t),a=0;a<r.length;a++){var s=r[a],o=s.geometry,u=s.material,h=o.getAttribute("index"),l=o.getAttribute("position");if(h){if(0===h.count)return}else if(!l||0===l.count)return;var c=n.getParameters(s),f=n.getProgramKey(c),v=n.getProgram(f,c),d=v.getProgram();this._currentProgram!==d&&(this._currentProgram=d,i.useProgram(d)),s.modelViewMatrix.multiplyMatrices(e.inverseWorldMatrix,s.worldMatrix),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),this.setUniforms(v,s,e),this.setAttributes(v,s),!0===u.wireframe&&(h=o.getWireframeAttribute());var y=this.getDrawMode(s);if(h){var m=this._bufferManager.get(h);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,m),i.drawElements(y,h.count,h.glType,0)}else{var p=s.geometry.getAttribute("position").count;i.drawArrays(y,0,p)}}}},{key:"getDrawMode",value:function(t){var e=this._gl,i=t.type,n=t.drawMode;return void 0===n&&(i===p?n=e.TRIANGLES:i===x?n=e.LINE_STRIP:i===M?n=e.LINES:i===k?n=e.LINE_LOOP:i===b&&(n=e.POINTS)),t.material.wireframe&&(n=e.LINES),n}},{key:"setClearColor",value:function(t){this._clearColor=t}},{key:"getRenderList",value:function(t){var e=[];if(!0===t.visible){t.geometry&&t.material&&e.push(t);for(var i=t.children,n=0,r=i.length;n<r;n++)e.push.apply(e,Xe()(this.getRenderList(i[n])))}return e}},{key:"clear",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0,r=this._gl;t&&(n|=r.COLOR_BUFFER_BIT),e&&(n|=r.DEPTH_BUFFER_BIT),i&&(n|=r.STENCIL_BUFFER_BIT),r.clear(n)}},{key:"destroy",value:function(){this.domElement=null,this._gl=null,this._programManager.destroy(),this._bufferManager.destroy()}}]),t}();i.d(e,"Clock",(function(){return h})),i.d(e,"constants",(function(){return n})),i.d(e,"AnimationClip",(function(){return F})),i.d(e,"AnimationMixer",(function(){return L})),i.d(e,"KeyFrameTrack",(function(){return Y})),i.d(e,"NumberKeyFrameTrack",(function(){return q})),i.d(e,"QuaternionKeyFrameTrack",(function(){return Z})),i.d(e,"VectorKeyFrameTrack",(function(){return K})),i.d(e,"Camera",(function(){return Et})),i.d(e,"OrthographicCamera",(function(){return zt})),i.d(e,"PerspectiveCamera",(function(){return St})),i.d(e,"OrbitController",(function(){return It})),i.d(e,"BoxGeometry",(function(){return jt})),i.d(e,"Geometry",(function(){return Nt})),i.d(e,"PlaneGeometry",(function(){return Bt})),i.d(e,"WireframeGeometry",(function(){return Dt})),i.d(e,"AxesHelper",(function(){return Xt})),i.d(e,"CameraHelper",(function(){return Kt})),i.d(e,"GridHelper",(function(){return Qt})),i.d(e,"LineBasicMaterial",(function(){return qt})),i.d(e,"Material",(function(){return Yt})),i.d(e,"PointsMaterial",(function(){return Jt})),i.d(e,"Box3",(function(){return Ft})),i.d(e,"Color",(function(){return Wt})),i.d(e,"Euler",(function(){return gt})),i.d(e,"Mat3",(function(){return ut})),i.d(e,"Mat4",(function(){return tt})),i.d(e,"Quaternion",(function(){return X})),i.d(e,"Spherical",(function(){return Pt})),i.d(e,"mathUtils",(function(){return r})),i.d(e,"Vec3",(function(){return $})),i.d(e,"CubicSplineInterpolant",(function(){return W})),i.d(e,"Interpolant",(function(){return D})),i.d(e,"LinearInterpolant",(function(){return G})),i.d(e,"QuaternionLinearInterpolant",(function(){return H})),i.d(e,"StepInterpolant",(function(){return V})),i.d(e,"GraphObject",(function(){return At})),i.d(e,"Group",(function(){return $t})),i.d(e,"Line",(function(){return te})),i.d(e,"LineSegments",(function(){return Gt})),i.d(e,"Mesh",(function(){return ee})),i.d(e,"Plane",(function(){return ie})),i.d(e,"Points",(function(){return ne})),i.d(e,"Scene",(function(){return re})),i.d(e,"BufferAttribute",(function(){return Rt})),i.d(e,"WebGLBufferManager",(function(){return ae})),i.d(e,"WebGLCapabilities",(function(){return se})),i.d(e,"WebGLProgram",(function(){return De})),i.d(e,"WebGLProgramManager",(function(){return Ye})),i.d(e,"WebGLRenderer",(function(){return He})),i.d(e,"WebGLUniforms",(function(){return Ne})),i.d(e,"shaders",(function(){return ge})),i.d(e,"pointsFragGLSL",(function(){return ce})),i.d(e,"pointsVertGLSL",(function(){return le})),i.d(e,"ShaderCode",(function(){return oe})),i.d(e,"wireframeFragGLSL",(function(){return"\nattribute a_Position;\nattribute a_Barycentric;\nattribute vec3 a_Color;\nuniform mat4 u_MVPMatrix;\nvarying vec3 v_Color;\nvarying vec3 v_Barycentric;\n\nvoid main () {\n    gl_Position = u_MVPMatrix * a_Position;\n    v_Color = a_Color;\n    v_Barycentric = a_Barycentric;\n}\n"})),i.d(e,"wireframeVertGLSL",(function(){return"\nvarying vec3 v_Color;\nvarying vec3 v_Barycentric;\n\nvoid main() {\n    if (any(lessThan(v_Barycentric, vec3(0.1)))) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    } else {\n        gl_FragColor = vec4(v_Color, 1.0);\n    }\n}\n"})),i.d(e,"DiffuseUniform",(function(){return Le})),i.d(e,"uniforms",(function(){return Re})),i.d(e,"ModelMatrixUniform",(function(){return Te})),i.d(e,"NormalMatrixUniform",(function(){return Oe})),i.d(e,"ProjectionMatrixUniform",(function(){return Fe})),i.d(e,"ViewMatrixUniform",(function(){return Ie})),i.d(e,"WebGLUniform",(function(){return Ce}))}])}));